"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[7942],{7942:function(e,s,n){n.r(s);var c=n(1413),t=n(9439),a=n(2791),l=n(1243),i=n(3853),o=n(184),r="https://pizzaking.onrender.com/admin/contacts",d=function(e){var s=e.contact,n=e.handleIssueResolved,c=(0,a.useState)(!1),d=(0,t.Z)(c,2),u=d[0],h=d[1];return(0,o.jsx)("li",{className:"py-4",children:(0,o.jsxs)("div",{className:"space-y-2 ",children:[(0,o.jsxs)("p",{className:"font-semibold",children:[(0,o.jsx)("strong",{children:"Name"}),": ",s.name]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Email"}),": ",s.email]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"QueryID"}),": ",s.complaintId]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Mobile Number"}),": ",s.mobileNumber]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Subject"}),": ",s.subject]}),(0,o.jsxs)("div",{className:"mt-2",children:[(0,o.jsx)("strong",{children:"Message : "}),s.message.length>100?(0,o.jsxs)("span",{children:[s.message.slice(0,100)," ",(0,o.jsx)("button",{className:"text-blue-500 hover:text-blue-700",onClick:function(){alert(s.message)},children:"Read More"})]}):(0,o.jsx)("span",{children:s.message})]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Issue Resolved"}),": ",s.issueResolved?"Yes":"No"]}),!s.issueResolved&&(0,o.jsxs)("button",{className:"font-bold py-2 px-4 rounded bg-green-500 hover:bg-green-700 text-white",onClick:function(){h(!0),l.Z.patch("".concat(r,"/").concat(s._id),{issueResolved:!0}).then((function(e){console.log("Contact updated:",e.data),h(!1),n(s._id)})).catch((function(e){console.log("An error occurred while updating the contact:",e),h(!1)}))},disabled:u,children:[u?(0,o.jsx)("span",{className:"mr-2",children:(0,o.jsx)(i.dAq,{className:"inline-block animate-spin"})}):null,"Resolve Issue"]})]})})};s.default=function(){var e=(0,a.useState)([]),s=(0,t.Z)(e,2),n=s[0],i=s[1];(0,a.useEffect)((function(){u()}),[]);var u=function(){l.Z.get(r).then((function(e){i(e.data)})).catch((function(e){console.log("An error occurred while fetching the contacts:",e)}))},h=function(e){var s=n.map((function(s){return s._id===e?(0,c.Z)((0,c.Z)({},s),{},{issueResolved:!0}):s}));i(s)};return(0,o.jsxs)("div",{className:"container mx-auto p-4",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Contact Form Submissions"}),(0,o.jsx)("div",{className:"max-h-100 overflow-y-auto ",children:n.length>0?(0,o.jsx)("ul",{className:"divide-y divide-gray-300",children:n.slice().reverse().map((function(e){return(0,o.jsx)(d,{contact:e,handleIssueResolved:h},e._id)}))}):(0,o.jsx)("p",{className:"text-gray-500",children:"No contact form submissions found."})})]})}}}]);
//# sourceMappingURL=7942.d3737576.chunk.js.map