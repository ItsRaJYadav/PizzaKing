"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[246],{4822:function(e,r,t){t.d(r,{AW:function(){return u},TX:function(){return i},a$:function(){return c},h8:function(){return d}});var s=t(4165),n=t(5861),a=t(1243),l=t(2062),o=t.n(l),c=function(e){return function(){var r=(0,n.Z)((0,s.Z)().mark((function r(t){return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t({type:"USER_REGISTER_REQUEST"}),r.prev=1,r.next=4,a.Z.post("/api/users/register",e);case 4:t({type:"USER_REGISTER_SUCCESS"}),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(1),r.t0.response&&r.t0.response.data?t({type:"USER_REGISTER_FAIL",payload:r.t0.response.data}):t({type:"USER_REGISTER_FAIL",payload:"An error occurred. Please try again."});case 10:case"end":return r.stop()}}),r,null,[[1,7]])})));return function(e){return r.apply(this,arguments)}}()},i=function(){return function(e){localStorage.removeItem("currentUser"),window.location.href="/login"}},u=function(){return function(){var e=(0,n.Z)((0,s.Z)().mark((function e(r){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:"GET_USERS_REQUEST"}),e.prev=1,e.next=4,a.Z.get("/api/users/getallusers");case 4:t=e.sent,r({type:"GET_USERS_SUCCESS",payload:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r({type:"GET_USERS_FAIL",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(r){return e.apply(this,arguments)}}()},d=function(e){return function(){var r=(0,n.Z)((0,s.Z)().mark((function r(t){return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,a.Z.post("/api/users/deleteuser",{userid:e});case 3:o()("User Deleted Succss!","success"),window.location.reload(),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),o()("Errro While Deleteing User");case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e){return r.apply(this,arguments)}}()}},6246:function(e,r,t){t.r(r),t.d(r,{default:function(){return v}});var s=t(9439),n=t(2791),a=t(7689),l=t(1087),o=t(4270),c=t(8880),i=t(4822),u=t(9434),d=t(3853),m=t(5985),p=(t(5462),t(1243)),x=t(4165),h=t(5861),f=t(761),b=t.n(f),g=t(184),w=function(e){var r=(0,n.useState)(""),t=(0,s.Z)(r,2),l=t[0],o=t[1],c=(0,n.useState)(""),i=(0,s.Z)(c,2),u=i[0],d=i[1],f=(0,n.useState)(""),w=(0,s.Z)(f,2),v=w[0],y=w[1],j=(0,a.s0)(),N=function(){var r=(0,h.Z)((0,x.Z)().mark((function r(t){var s,n;return(0,x.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s="https://pizzaking.cyclic.app/api/users/changepassword",t.preventDefault(),v){r.next=5;break}return m.Am.error("OTP is required"),r.abrupt("return");case 5:if(l){r.next=8;break}return m.Am.error("Password is required"),r.abrupt("return");case 8:if(u){r.next=11;break}return m.Am.error("Confirm Password is required"),r.abrupt("return");case 11:if(l===u){r.next=14;break}return m.Am.error("Passwords do not match"),r.abrupt("return");case 14:return n={email:e.email,otpCode:v,password:l},r.prev=15,r.next=18,p.Z.post(s,n,{headers:{"Content-Type":"application/json"}});case 18:"success"===r.sent.data.statusText?(m.Am.success("Password updated successfully"),setTimeout((function(){j("/login")}),1500)):m.Am.error("Error updating password"),r.next=25;break;case 22:r.prev=22,r.t0=r.catch(15),m.Am.error("Error updating password");case 25:case"end":return r.stop()}}),r,null,[[15,22]])})));return function(e){return r.apply(this,arguments)}}(),S=b()(l).score;return(0,g.jsxs)("div",{className:"max-w-md mx-auto mt-8 p-6 bg-white rounded-lg shadow-md",children:[(0,g.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Reset Password"}),(0,g.jsxs)("form",{onSubmit:N,children:[(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsx)("label",{htmlFor:"otp",className:"block font-bold mb-1",children:"OTP"}),(0,g.jsx)("input",{type:"text",id:"otp",name:"otp",className:"border border-gray-300 px-3 py-2 rounded-md w-full",value:v,onChange:function(e){y(e.target.value)}})]}),(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsx)("label",{htmlFor:"password",className:"block font-bold mb-1",children:"New Password"}),(0,g.jsx)("input",{type:"password",id:"password",name:"password",className:"border border-gray-300 px-3 py-2 rounded-md w-full",value:l,onChange:function(e){o(e.target.value)}})]}),(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsx)("label",{htmlFor:"confirmPassword",className:"block font-bold mb-1",children:"Confirm Password"}),(0,g.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",className:"border border-gray-300 px-3 py-2 rounded-md w-full",value:u,onChange:function(e){d(e.target.value)}})]}),(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsxs)("div",{className:"flex items-center mb-1",children:[(0,g.jsx)("span",{className:"w-4 h-1 mr-2 bg-".concat(0===l.length?"gray-300":4===S?"green-500":S>=3?"yellow-500":S>=2?"blue-500":"red-500")}),(0,g.jsx)("span",{className:"text-sm",children:0===l.length?"Password Strength":4===S?"Strong":S>=3?"Medium":S>=2?"Fair":"Weak"})]}),(0,g.jsx)("div",{className:"w-full h-2 bg-gray-300 rounded-full",children:(0,g.jsx)("div",{className:"h-full ".concat(0===l.length?"w-0 bg-gray-300":4===S?"w-full bg-green-500":S>=3?"w-3/4 bg-yellow-500":S>=2?"w-1/2 bg-blue-500":"w-1/4 bg-red-500")})})]}),(0,g.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition-colors",children:"Reset Password"})]}),(0,g.jsx)(m.Ix,{})]})},v=function(){var e=(0,n.useRef)(),r=(0,c.D3)().isAuthenticated,t=(0,n.useState)(""),x=(0,s.Z)(t,2),h=x[0],f=x[1],b=(0,n.useState)(!0),v=(0,s.Z)(b,2),y=v[0],j=v[1],N=(0,u.v9)((function(e){return e.loginUserReducer})),S=(0,u.v9)((function(e){return e.getAllUsersReducer})),E=N.currentUser,k=S.users.find((function(e){return e.email===h})),R=(0,u.I0)();(0,n.useEffect)((function(){R((0,i.AW)())}),[R]);(0,a.s0)();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o.q,{children:(0,g.jsx)("title",{children:"Forgot Password"})}),r||E?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gray-100",children:(0,g.jsxs)("div",{className:"w-full max-w-md",children:[(0,g.jsxs)("div",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",children:[(0,g.jsxs)("div",{className:"flex items-center justify-center mb-6",children:[(0,g.jsx)(d.bcx,{className:"text-red-500 text-6xl mr-2"}),(0,g.jsx)("p",{className:"text-red-500 text-lg font-semibold",children:"You are already logged in with your credentials."})]}),(0,g.jsxs)(l.rU,{to:"/user",className:"bg-red-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mt-4 block w-full text-center",children:[(0,g.jsx)(d.Ao2,{className:"mr-2"}),"Back"]})]}),(0,g.jsx)("p",{className:"text-center text-gray-500 text-xs",children:"\xa9 2023 PizzaKing. All rights reserved."})]})})," "]}):(0,g.jsx)("div",{children:(0,g.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gray-100",children:(0,g.jsxs)("div",{className:"w-full max-w-md",children:[y?(0,g.jsxs)("div",{children:[" ",(0,g.jsxs)("form",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",onSubmit:function(e){e.preventDefault(),p.Z.post("https://pizzaking.cyclic.app/api/users/forgotpassword",{email:h}).then((function(e){console.log(e.data),"success"===e.data.statusText?(m.Am.success("An OTP is sent to your email ".concat(h)),setTimeout((function(){j(!1)}),1500)):alert(e.data.message)})).catch((function(e){console.log(e)}))},children:[(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email Address"}),(0,g.jsx)("input",{required:!0,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"email",type:"email",placeholder:"Enter your email address",value:h,onChange:function(e){return f(e.target.value)},ref:e}),k?(0,g.jsx)("p",{className:"text-green-500 text-xs mt-1",children:"Email address is registered with us."}):(0,g.jsx)("p",{className:"text-red-500 text-xs mt-1",children:"Email not registered."}),(0,g.jsx)("p",{className:"mb-3 mt-3 text-center",children:"We will send an OTP to your registered email."})]}),(0,g.jsxs)("div",{className:"flex items-center justify-center",children:[(0,g.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:"Send OTP"}),(0,g.jsx)(l.rU,{to:"/login",className:"bg-red-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mt-2 sm:mt-0 ml-2 sm:ml-4",children:"Back"})]})]})]}):(0,g.jsxs)("div",{children:[" ",(0,g.jsx)(w,{email:e.current.value})," "]}),(0,g.jsx)("p",{className:"text-center text-gray-500 text-xs",children:"\xa9 2023 PizzaKing. All rights reserved."})]})})}),(0,g.jsx)(m.Ix,{})]})}}}]);
//# sourceMappingURL=246.fc989ee4.chunk.js.map