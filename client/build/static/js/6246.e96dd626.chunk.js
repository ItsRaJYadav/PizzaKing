"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[6246],{4822:function(e,t,r){r.d(t,{AW:function(){return u},TX:function(){return i},a$:function(){return c},h8:function(){return d}});var s=r(4165),n=r(5861),a=r(1243),l=r(2062),o=r.n(l),c=function(e){return function(){var t=(0,n.Z)((0,s.Z)().mark((function t(r){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:"USER_REGISTER_REQUEST"}),t.prev=1,t.next=4,a.Z.post("/api/users/register",e);case 4:r({type:"USER_REGISTER_SUCCESS"}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),t.t0.response&&t.t0.response.data?r({type:"USER_REGISTER_FAIL",payload:t.t0.response.data}):r({type:"USER_REGISTER_FAIL",payload:"An error occurred. Please try again."});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},i=function(){return function(e){localStorage.removeItem("currentUser"),window.location.href="/login"}},u=function(){return function(){var e=(0,n.Z)((0,s.Z)().mark((function e(t){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_USERS_REQUEST"}),e.prev=1,e.next=4,a.Z.get("/api/users/getallusers");case 4:r=e.sent,t({type:"GET_USERS_SUCCESS",payload:r.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"GET_USERS_FAIL",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},d=function(e){return function(){var t=(0,n.Z)((0,s.Z)().mark((function t(r){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.Z.post("/api/users/deleteuser",{userid:e});case 3:o()("User Deleted Succss!","success"),window.location.reload(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),o()("Errro While Deleteing User");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},6246:function(e,t,r){r.r(t),r.d(t,{default:function(){return v}});var s=r(9439),n=r(2791),a=r(1087),l=r(4270),o=r(8880),c=r(4822),i=r(9434),u=r(3853),d=r(5985),m=(r(5462),r(1243)),p=r(4165),x=r(5861),f=r(761),h=r.n(f),b=r(7689),g=r(184),w=function(e){var t=(0,n.useState)(""),r=(0,s.Z)(t,2),a=r[0],l=r[1],o=(0,n.useState)(""),c=(0,s.Z)(o,2),i=c[0],f=c[1],w=(0,n.useState)(!1),v=(0,s.Z)(w,2),j=v[0],y=v[1],N=(0,n.useState)(""),S=(0,s.Z)(N,2),E=S[0],k=S[1],Z=(0,b.s0)(),A=function(){var t=(0,x.Z)((0,p.Z)().mark((function t(r){var s,n;return(0,p.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s="https://pizzaking.onrender.com/api/users/changepassword",r.preventDefault(),E){t.next=5;break}return d.Am.error("OTP is required"),t.abrupt("return");case 5:if(a){t.next=8;break}return d.Am.error("Password is required"),t.abrupt("return");case 8:if(i){t.next=11;break}return d.Am.error("Confirm Password is required"),t.abrupt("return");case 11:if(a===i){t.next=14;break}return d.Am.error("Passwords do not match"),t.abrupt("return");case 14:return y(!0),n={email:e.email,otpCode:E,password:a},t.prev=16,t.next=19,m.Z.post(s,n,{headers:{"Content-Type":"application/json"}});case 19:"success"===t.sent.data.statusText?(y(!1),d.Am.success("Password updated successfully"),setTimeout((function(){Z("/login")}),1500)):(y(!1),d.Am.error("Error updating password")),t.next=27;break;case 23:t.prev=23,t.t0=t.catch(16),y(!1),d.Am.error("Error updating password");case 27:case"end":return t.stop()}}),t,null,[[16,23]])})));return function(e){return t.apply(this,arguments)}}(),P=h()(a).score;return(0,g.jsxs)("div",{className:"max-w-md mx-auto mt-8 p-6 bg-white rounded-lg shadow-md",children:[(0,g.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Reset Password"}),(0,g.jsxs)("form",{onSubmit:A,children:[(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsx)("label",{htmlFor:"otp",className:"block font-bold mb-1",children:"OTP"}),(0,g.jsx)("input",{type:"text",id:"otp",name:"otp",className:"border border-gray-300 px-3 py-2 rounded-md w-full",value:E,onChange:function(e){k(e.target.value)}})]}),(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsx)("label",{htmlFor:"password",className:"block font-bold mb-1",children:"New Password"}),(0,g.jsx)("input",{type:"password",id:"password",name:"password",className:"border border-gray-300 px-3 py-2 rounded-md w-full",value:a,onChange:function(e){l(e.target.value)}})]}),(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsx)("label",{htmlFor:"confirmPassword",className:"block font-bold mb-1",children:"Confirm Password"}),(0,g.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",className:"border border-gray-300 px-3 py-2 rounded-md w-full",value:i,onChange:function(e){f(e.target.value)}})]}),(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsxs)("div",{className:"flex items-center mb-1",children:[(0,g.jsx)("span",{className:"w-4 h-1 mr-2 bg-".concat(0===a.length?"gray-300":4===P?"green-500":P>=3?"yellow-500":P>=2?"blue-500":"red-500")}),(0,g.jsx)("span",{className:"text-sm",children:0===a.length?"Password Strength":4===P?"Strong":P>=3?"Medium":P>=2?"Fair":"Weak"})]}),(0,g.jsx)("div",{className:"w-full h-2 bg-gray-300 rounded-full",children:(0,g.jsx)("div",{className:"h-full ".concat(0===a.length?"w-0 bg-gray-300":4===P?"w-full bg-green-500":P>=3?"w-3/4 bg-yellow-500":P>=2?"w-1/2 bg-blue-500":"w-1/4 bg-red-500")})})]}),j?(0,g.jsxs)("div",{className:"flex items-center justify-center mb-6",children:[(0,g.jsx)(u.dAq,{className:"animate-spin text-2xl mr-2"}),"Updating Password..."]}):(0,g.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition-colors",children:"Reset Password"})]}),(0,g.jsx)(d.Ix,{})]})},v=function(){var e=(0,n.useRef)(),t=(0,o.D3)().isAuthenticated,r=(0,n.useState)(""),p=(0,s.Z)(r,2),x=p[0],f=p[1],h=(0,n.useState)(!0),b=(0,s.Z)(h,2),v=b[0],j=b[1],y=(0,n.useState)(!1),N=(0,s.Z)(y,2),S=N[0],E=N[1],k=(0,i.v9)((function(e){return e.loginUserReducer})),Z=(0,i.v9)((function(e){return e.getAllUsersReducer})),A=k.currentUser,P=Z.users.find((function(e){return e.email===x})),R=(0,i.I0)();(0,n.useEffect)((function(){R((0,c.AW)())}),[R]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(l.q,{children:(0,g.jsx)("title",{children:"Forgot Password"})}),t||A?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gray-100",children:(0,g.jsxs)("div",{className:"w-full max-w-md",children:[(0,g.jsxs)("div",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",children:[(0,g.jsxs)("div",{className:"flex items-center justify-center mb-6",children:[(0,g.jsx)(u.bcx,{className:"text-red-500 text-6xl mr-2"}),(0,g.jsx)("p",{className:"text-red-500 text-lg font-semibold",children:"You are already logged in with your credentials."})]}),(0,g.jsxs)(a.rU,{to:"/user",className:"bg-red-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mt-4 block w-full text-center",children:[(0,g.jsx)(u.Ao2,{className:"mr-2"}),"Back"]})]}),(0,g.jsx)("p",{className:"text-center text-gray-500 text-xs",children:"\xa9 2023 PizzaKing. All rights reserved."})]})})," "]}):(0,g.jsx)("div",{children:(0,g.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gray-100",children:(0,g.jsxs)("div",{className:"w-full max-w-md",children:[v?(0,g.jsxs)("div",{children:[" ",(0,g.jsxs)("form",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",onSubmit:function(e){E(!0);e.preventDefault(),m.Z.post("https://pizzaking.onrender.com/api/users/forgotpassword",{email:x}).then((function(e){console.log(e.data),"success"===e.data.statusText?(E(!1),d.Am.success("An OTP is sent to your email ".concat(x)),setTimeout((function(){j(!1)}),1500)):(E(!1),alert(e.data.message))})).catch((function(e){E(!1),console.log(e)}))},children:[(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email Address"}),(0,g.jsx)("input",{required:!0,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"email",type:"email",placeholder:"Enter your email address",value:x,onChange:function(e){return f(e.target.value)},ref:e}),P?(0,g.jsx)("p",{className:"text-green-500 text-xs mt-1",children:"Email address is registered with us."}):(0,g.jsx)("p",{className:"text-red-500 text-xs mt-1",children:"Email not registered."}),(0,g.jsx)("p",{className:"mb-3 mt-3 text-center",children:"We will send an OTP to your registered email."})]}),(0,g.jsxs)("div",{className:"flex items-center justify-center",children:[S?(0,g.jsxs)("div",{className:"flex items-center justify-center mb-6",children:[(0,g.jsx)(u.dAq,{className:"animate-spin text-2xl mr-2"}),"Sending OTP..."]}):(0,g.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:"Send OTP"}),(0,g.jsx)(a.rU,{to:"/login",className:"bg-red-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mt-2 sm:mt-0 ml-2 sm:ml-4",children:"Back"})]})]})]}):(0,g.jsxs)("div",{children:[" ",(0,g.jsx)(w,{email:e.current.value})," "]}),(0,g.jsx)("p",{className:"text-center text-gray-500 text-xs",children:"\xa9 2023 PizzaKing. All rights reserved."})]})})}),(0,g.jsx)(d.Ix,{})]})}}}]);
//# sourceMappingURL=6246.e96dd626.chunk.js.map