"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[4648],{4648:function(e,r,t){t.r(r);var n=t(9439),a=t(2791),s=t(9434),c=t(5181),l=t(2375),i=t(6279),d=t(1830),o=t.n(d),u=t(1087),p=t(7689),x=t(8820),h=t(184);r.default=function(){var e=(0,a.useState)(""),r=(0,n.Z)(e,2),t=r[0],d=(r[1],(0,s.v9)((function(e){return e.allUserOrdersReducer}))),f=d.loading,m=d.orders,y=d.error,v=(0,s.I0)();(0,a.useEffect)((function(){v((0,c.zk)())}),[v]);return(0,h.jsxs)("div",{children:[f&&(0,h.jsx)(l.Z,{}),y&&(0,h.jsx)(i.Z,{error:"Admin Order request failed"}),(0,h.jsx)("div",{className:"overflow-x-auto",children:(0,h.jsxs)("table",{className:"w-full bg-white shadow-md rounded",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{className:"bg-gray-200 text-gray-700 uppercase text-sm leading-normal",children:[(0,h.jsx)("th",{className:"py-3 px-4 text-left",children:"Order Id"}),(0,h.jsx)("th",{className:"py-3 px-4 text-left",children:"Email"}),(0,h.jsx)("th",{className:"py-3 px-4 text-left",children:"Customer"}),(0,h.jsx)("th",{className:"py-3 px-4 text-left",children:"Amount"}),(0,h.jsx)("th",{className:"py-3 px-4 text-left",children:"Date"}),(0,h.jsx)("th",{className:"py-3 px-4 text-left",children:"Status"}),(0,h.jsx)("th",{className:"py-3 px-4 text-left",children:"Order Items"})]})}),(0,h.jsx)("tbody",{children:m&&m.map((function(e){return(0,h.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:[(0,h.jsx)("td",{className:"py-4 px-6",children:(0,h.jsx)(u.rU,{to:"/admin/orderlist/".concat(e._id),children:e._id})}),(0,h.jsx)("td",{className:"py-4 px-6",children:e.email}),(0,h.jsx)("td",{className:"py-4 px-6",children:e.name}),(0,h.jsxs)("td",{className:"py-4 px-6",children:["Rs ",e.orderAmount,"/-"]}),(0,h.jsx)("td",{className:"py-4 px-6",children:e.createdAt.substring(0,10)}),(0,h.jsx)("td",{className:"py-4 px-6",children:e.isCanceled?(0,h.jsx)("h6",{className:"text-red-500",children:"Cancelled"}):(0,h.jsxs)(h.Fragment,{children:[e.isDelivered?(0,h.jsx)("h6",{className:"text-green-500",children:"Delivered"}):(0,h.jsx)("button",{className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded",onClick:function(){return r=e._id,void o().fire({title:"Deliver Order",text:"Are you sure you want to deliver this order?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, deliver it!",cancelButtonText:"Cancel"}).then((function(e){e.isConfirmed&&(v((0,c.rC)(r)),o().fire("Delivered!","The order has been delivered.","success"))}));var r},children:"Deliver"}),!e.isDelivered&&(0,h.jsxs)("button",{className:"flex items-center justify-center py-3 px-6 rounded-lg text-gray-700 hover:bg-gray-300 ".concat("cancelorder"===t?"bg-gray-300 text-gray-800 font-semibold":""),disabled:e.isCanceled,onClick:function(){return r=e._id,void o().fire({title:"Cancel Order",text:"Are you sure you want to cancel this order?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, cancel it!",cancelButtonText:"Cancel"}).then((function(e){e.isConfirmed&&(v((0,c.sl)(r)),o().fire("Cancelled!","The order has been cancelled.","success"))}));var r},children:[(0,h.jsx)(x.SV5,{className:"mr-2"}),(0,h.jsx)("span",{children:"Cancel Order"})]})]})}),(0,h.jsx)("td",{className:"py-4 px-6",children:(0,h.jsx)("ol",{className:"list-decimal list-inside",children:e.orderItems.map((function(e,r){return(0,h.jsxs)("li",{className:"mb-2 flex items-center",children:[(0,h.jsxs)("span",{className:"font-bold",children:[r+1,"."]}),(0,h.jsx)("span",{className:"ml-2 font-bold",children:e.name})," -",(0,h.jsx)("span",{className:"ml-2 mr-1 bg-".concat(e.quantity>2?"green":"yellow","-200 px-2 rounded"),children:e.quantity})," ",e.varient]},e._id)}))})})]},e._id)}))})]})}),(0,h.jsx)("div",{className:"flex-1 bg-white p-8",children:(0,h.jsx)(p.j3,{})})]})}},6279:function(e,r,t){t(2791);var n=t(184);r.Z=function(e){var r=e.error;return(0,n.jsx)("div",{className:"bg-red-100 border border-red-500 text-red-700 px-4 py-3 rounded relative",children:(0,n.jsx)("span",{className:"block sm:inline",children:r})})}},2375:function(e,r,t){t(2791);var n=t(184);r.Z=function(){return(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsx)("div",{className:"border-t-4 border-b-4 border-blue-500 rounded-full w-12 h-12 animate-spin"})})}},5181:function(e,r,t){t.d(r,{rC:function(){return i},sl:function(){return d},uI:function(){return c},zk:function(){return l}});var n=t(4165),a=t(5861),s=t(1243),c=function(){return function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r,t){var a,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t().loginUserReducer.currentUser,r({type:"USER_ORDER_REQUEST"}),e.prev=2,e.next=5,s.Z.post("/api/orders/getuserorder",{email:a.email});case 5:c=e.sent,r({type:"USER_ORDER_SUCCESS",payload:c.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),r({type:"USER_ORDER_FAIL",payload:e.t0});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(r,t){return e.apply(this,arguments)}}()},l=function(){return function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r,t){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:"ALL_ORDER_REQUEST"}),e.prev=1,e.next=4,s.Z.get("/api/orders/alluserorder");case 4:a=e.sent,r({type:"ALL_ORDER_SUCCESS",payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r({type:"ALL_ORDER_FAIL",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(r,t){return e.apply(this,arguments)}}()},i=function(e){return function(){var r=(0,a.Z)((0,n.Z)().mark((function r(t,a){var c;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t({type:"GET_ALL_ORDER_REQUEST"}),r.prev=1,r.next=4,s.Z.post("/api/orders/deliverorder",{orderid:e});case 4:return r.next=6,s.Z.get("/api/orders/alluserorder");case 6:c=r.sent,t({type:"GET_ALL_ORDER_SUCCESS",payload:c.data}),window.location.href="/admin/orderlist",r.next=14;break;case 11:r.prev=11,r.t0=r.catch(1),t({type:"GET_ALL_ORDER_FAIL",payload:r.t0});case 14:case"end":return r.stop()}}),r,null,[[1,11]])})));return function(e,t){return r.apply(this,arguments)}}()},d=function(e){return function(){var r=(0,a.Z)((0,n.Z)().mark((function r(t,a){var c;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t({type:"GET_ALL_ORDER_REQUEST"}),r.prev=1,r.next=4,s.Z.post("/api/orders/canceOrder",{orderid:e});case 4:return r.next=6,s.Z.get("/api/orders/alluserorder");case 6:c=r.sent,t({type:"GET_ALL_ORDER_SUCCESS",payload:c.data}),window.location.href="/admin/orderlist",r.next=14;break;case 11:r.prev=11,r.t0=r.catch(1),t({type:"GET_ALL_ORDER_FAIL",payload:r.t0});case 14:case"end":return r.stop()}}),r,null,[[1,11]])})));return function(e,t){return r.apply(this,arguments)}}()}}}]);
//# sourceMappingURL=4648.ed0103f2.chunk.js.map